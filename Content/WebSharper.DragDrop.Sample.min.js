import { Start as fD } from "./WebSharper.Core.JavaScript/Runtime.js"
import { MarkResizable as fE, SetOptional as fF, GetOptional as fG, CreateFuncWithArgs as fH, DeleteEmptyFields as fI, Lazy as fJ, Create as fK, OnLoad as fL } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(fM){ return"Dispose"in fM;}
function b(){ const fM=new m("New_1");const fN=(fM.h.push(new Z("boxinit", () => { c();})),fM);const fO=C(fN.k, fN.h, []);const fP=new h(fO[1], y(fO[0]));let fQ=(fN.i=fP,fP);const fR=fQ.Doc;E("");W.RunById("main", fR);}
function c(){ const fM=globalThis.document.getElementById("dragBox");const fN=globalThis.document.getElementById("dropZone");fM.addEventListener("dragstart", (fO) => fO.dataTransfer.setData("text/plain", "Dropped!"));fN.addEventListener("dragover", (fO) => fO.preventDefault());fN.addEventListener("drop", (fO) => { fO.preventDefault();fN.textContent=fO.dataTransfer.getData("text/plain");return fN.classList.add("drop-element");});}
function d(fM){ throw new Error(fM);}
function e(fM){ return[fM.K, fM.V];}
function f(fM, fN){ const fO=1+fN-fM;return fO<=0?[]:$(fO, (fP) => fP+fM);}
class g { Equals(fM){ return this===fM;} GetHashCode(){ return -1;} }
class h extends g { doc;allVars;anchorRoot;get Doc(){ return this.doc;} constructor(fM, fN){ super();this.doc=fN;this.allVars=fM.$==0?fM.$0:d("Should not happen");this.anchorRoot=null;} }
function i(fM, fN){ k(fM, fN);return fM[fN];}
function j(fM, fN, fO){ k(fM, fN);fM[fN]=fO;}
function k(fM, fN){ if(fN<0||fN>=fM.length)d("Index was outside the bounds of the array.");}
function l(fM){ return fM.dims===2?fM.length*fM.length:fM.length;}
class m extends g { i;k;h;s;static New_1(){ return new this("New_1");} constructor(fM){ if(fM=="New_1"){ let fN;super();this.i=null;this.k=(fN=A(),String(fN));this.h=fE([]);fF(this, "s", null);} } }
function n(fM, fN){ if(fM===fN)return true;else { const fO=typeof fM;if(fO=="object"){ if(fM===null||fM===void 0||fN===null||fN===void 0||!n(typeof fN, "object"))return false;else if("Equals"in fM)return fM.Equals(fN);else if("Equals"in fN)return false;else if(fM instanceof Array&&fN instanceof Array)return o(fM, fN);else if(fM instanceof Date&&fN instanceof Date)return p(fM, fN);else { const fP=[true];let fQ;for(var fS in fM)if(((fT) => { fP[0]=!fM.hasOwnProperty(fT)||fN.hasOwnProperty(fT)&&n(fM[fT], fN[fT]);return!fP[0];})(fS))break;if(fP[0]){ let fR;for(var fT in fN)if(((fU) => { fP[0]=!fN.hasOwnProperty(fU)||fM.hasOwnProperty(fU);return!fP[0];})(fT))break;} return fP[0];} } else return fO=="function"&&("$Func"in fM?fM.$Func===fN.$Func&&fM.$Target===fN.$Target:"$Invokes"in fM&&"$Invokes"in fN&&o(fM.$Invokes, fN.$Invokes));} }
function o(fM, fN){ let fO;let fP;if(l(fM)===l(fN)){ fO=true;fP=0;while(fO&&fP<l(fM)){!n(i(fM, fP), i(fN, fP))?fO=false:void 0;fP=fP+1;} return fO;} else return false;}
function p(fM, fN){ return fM.getTime()===fN.getTime();}
function q(fM){ const fN=typeof fM;return fN=="function"?0:fN=="boolean"?fM?1:0:fN=="number"?fM:fN=="string"?r(fM):fN=="object"?fM==null?0:fM instanceof Array?s(fM):t(fM):0;}
function r(fM){ let fN;if(fM===null)return 0;else { fN=5381;for(let fO=0, fP=fM.length-1;fO<=fP;fO++)fN=u(fN, fM[fO].charCodeAt());return fN;} }
function s(fM){ let fN=-34948909;for(let fO=0, fP=l(fM)-1;fO<=fP;fO++)fN=u(fN, q(i(fM, fO)));return fN;}
function t(fM){ if("GetHashCode"in fM)return fM.GetHashCode();else { const fN=[0];let fO;for(var fP in fM)if(((fQ) => { fN[0]=u(u(fN[0], r(fQ)), q(fM[fQ]));return false;})(fP))break;return fN[0];} }
function u(fM, fN){ return(fM<<5)+fM+fN;}
function v(fM, fN){ if(fM===fN)return 0;else { const fO=typeof fM;switch(fO=="function"?1:fO=="boolean"?2:fO=="number"?2:fO=="string"?2:fO=="object"?3:0){ case 0:return typeof fN=="undefined"?0:-1;case 1:return d("Cannot compare function values.");case 2:return fM<fN?-1:1;case 3:if(fM===null)return -1;else if(fN===null)return 1;else if("CompareTo"in fM)return fM.CompareTo(fN);else if("CompareTo0"in fM)return fM.CompareTo0(fN);else if(fM instanceof Array&&fN instanceof Array)return w(fM, fN);else if(fM instanceof Date&&fN instanceof Date)return x(fM, fN);else { const fP=[0];let fQ;for(var fS in fM)if(((fT) =>!fM.hasOwnProperty(fT)?false:!fN.hasOwnProperty(fT)?(fP[0]=1,true):(fP[0]=v(fM[fT], fN[fT]),fP[0]!==0))(fS))break;if(fP[0]===0){ let fR;for(var fT in fN)if(((fU) =>!fN.hasOwnProperty(fU)?false:!fM.hasOwnProperty(fU)&&(fP[0]=-1,true))(fT))break;} return fP[0];} break;} } }
function w(fM, fN){ let fO;let fP;if(l(fM)<l(fN))return -1;else if(l(fM)>l(fN))return 1;else { fO=0;fP=0;while(fO===0&&fP<l(fM)){ fO=v(i(fM, fP), i(fN, fP));fP=fP+1;} return fO;} }
function x(fM, fN){ return v(fM.getTime(), fN.getTime());}
function y(fM){ E("index");return fM?F("index", D("main"), fM):void 0;}
function z(fM){ const fN={};const fO=bK(fM);try { while(fO.MoveNext()){ const fP=fO.Current;fN[fP[0]]=fP[1];} } finally { if(typeof fO=="object"&&a(fO))fO.Dispose();} return fN;}
function A(){ return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]", "g"), (fM) => { const fN=Math.random()*16|0;const fO=fM=="x"?fN:fN&3|8;return fO.toString(16);});}
function B(fM){ let fN=[];let fO;for(var fP in fM)fN.push(fM[fP]);return fN;}
function C(fM, fN, fO){ const fP=new X("New_5");const fQ=new u0030("New_3");const fR=bK(fN);try { while(fR.MoveNext()){ const fS=fR.Current;const fT=fS.Name;fQ.SAdd(fT);fP.set_Item(fT, fS);} } finally { if(typeof fR=="object"&&a(fR))fR.Dispose();} return[u0031(fN, bf((fU) => { const fV=fU[0];const fW=fU[1];const fX=fU[2];if(fQ.Contains(fV))return null;else { const fY=fW===0?bu.GetOrAddHoleFor(fM, fV, () => { const fZ=fX==null?null:D(fX.$0);let f0=bw.Create_1(fZ==null?"":fZ.$0);return new bv(fV, f0);}):fW===1?bu.GetOrAddHoleFor(fM, fV, () => { const fZ=fX==null?null:D(fX.$0);let f0=bw.Create_1(fZ==null?0:fZ.$0);return new bx(fV, f0);}):fW===2?bu.GetOrAddHoleFor(fM, fV, () => { const fZ=fX==null?null:D(fX.$0);let f0=bw.Create_1(fZ==null?false:fZ.$0);return new by(fV, f0);}):fW===3?bu.GetOrAddHoleFor(fM, fV, () => { const fZ=fX==null?null:D(fX.$0);let f0=bw.Create_1(fZ==null?-8640000000000000:fZ.$0);return new bz(fV, f0);}):fW===4?bu.GetOrAddHoleFor(fM, fV, () => new bA(fV, bw.Create_1([]))):fW===5?bu.GetOrAddHoleFor(fM, fV, () => new bB(fV, bw.Create_1(D(globalThis.document.querySelector("[ws-dom="+fV+"]"))))):fW===6?bu.GetOrAddHoleFor(fM, fV, () => { const fZ=fX==null?null:D(fX.$0);let f0=bw.Create_1(fZ==null?[]:fZ.$0);return new bC(fV, f0);}):d("Invalid value type");fP.set_Item(fV, fY);return D(fY);} }, fO)), {$:0, $0:fP}];}
function D(fM){ return{$:1, $0:fM};}
function E(fM){!G()?(H(true),I(globalThis.document.body, "")):void 0;J().set_Item(fM, K(""));}
function F(fM, fN, fO){ let fP;const fQ=(fP=null,[K(fM).TryGetValue(fN==null?"":fN.$0, {get:() => fP, set:(fR) => { fP=fR;}}), fP]);return fQ[0]?L(fQ[1].cloneNode(true), fO):(console.warn("Local template doesn't exist", fN),W.Empty);}
function G(){ return cc.LocalTemplatesLoaded;}
function H(fM){ cc.LocalTemplatesLoaded=fM;}
function I(fM, fN){ const fO=K(fN);const fP=new X("New_5");const fQ=fM.querySelectorAll("[ws-template]");for(let f2=0, f3=fQ.length-1;f2<=f3;f2++){ const fR=fQ[f2];const fS=fR.getAttribute("ws-template").toLowerCase();fR.removeAttribute("ws-template");fP.set_Item(fS, M(fR));} const fT=fM.querySelectorAll("[ws-children-template]");for(let f4=0, f5=fT.length-1;f4<=f5;f4++){ const fU=fT[f4];const fV=fU.getAttribute("ws-children-template").toLowerCase();fU.removeAttribute("ws-children-template");fP.set_Item(fV, N(fU));} const fW=fM.querySelectorAll("template[id]");for(let f6=0, f7=fW.length-1;f6<=f7;f6++){ const fX=fW[f6];fP.set_Item(fX.getAttribute("id").toLowerCase(), O(fX));} const fY=fM.querySelectorAll("template[name]");for(let f8=0, f9=fY.length-1;f8<=f9;f8++){ const fZ=fY[f8];fP.set_Item(fZ.getAttribute("name").toLowerCase(), O(fZ));} const f0=new u0030("New_3");function f1(f_){ if(!fO.ContainsKey(f_)){ let f$;const ga=(f$=null,[fP.TryGetValue(f_, {get:() => f$, set:(gb) => { f$=gb;}}), f$]);if(ga[0]){ f0.SAdd(f_);fP.RemoveKey(f_);P(fN, D(f_), ga[1], D(f1));} else console.warn(f0.Contains(f_)?"Encountered loop when instantiating "+f_:"Local template does not exist: "+f_);} } while(fP.count>0)f1(u0032(fP.Keys));}
function J(){ return cc.LoadedTemplates;}
function K(fM){ let fN;const fO=(fN=null,[J().TryGetValue(fM, {get:() => fN, set:(fQ) => { fN=fQ;}}), fN]);if(fO[0])return fO[1];else { const fP=new X("New_5");J().set_Item(fM, fP);return fP;} }
function L(fM, fN){ let fO;const fP=Q(fM, u0031(fN, R().Values));const fQ=fP[1];const fR=fP[0];const fS=fR.Els;return!n(fS, null)&&fS.length===1&&(i(fS, 0)instanceof Node&&(n(i(fS, 0).nodeType, Node.ELEMENT_NODE)&&(fO=i(fS, 0),true)))?cE.TreeNode(fR, fQ):W.Mk(bE(fR), fQ);}
function M(fM){ fM.removeAttribute("ws-template");const fN=fM.getAttribute("ws-replace");if(fN==null){ } else { fM.removeAttribute("ws-replace");const fO=fM.parentNode;if(n(fO, null)){ } else { const fP=globalThis.document.createElement(fM.tagName);fP.setAttribute("ws-replace", fN);fO.replaceChild(fP, fM);} } const fQ=globalThis.document.createElement("div");fQ.appendChild(fM);return fQ;}
function N(fM){ const fN=globalThis.document.createElement("div");while(fM.hasChildNodes())fN.appendChild(fM.firstChild);return fN;}
function O(fM){ const fN=globalThis.document.createElement("div");const fO=fM.content;for(let fP=0, fQ=fO.childNodes.length-1;fP<=fQ;fP++)fN.appendChild(fO.childNodes[fP].cloneNode(true));return fN;}
function P(fM, fN, fO, fP){ const fQ=new u0030("New_3");function fR(fY, fZ){ while(true)switch(fY){ case 0:if(fZ!==null){ const f0=fZ.nextSibling;if(n(fZ.nodeType, Node.TEXT_NODE))cN(fZ);else if(n(fZ.nodeType, Node.ELEMENT_NODE))fT(fZ);fZ=f0;} else return null;break;case 1:const f1=cV(fZ.nodeName, D(3), null).toLowerCase();const f2=f1.indexOf(".");const f3=f2===-1?[fM, f1]:[cV(f1, null, D(f2-1)), cV(f1, D(f2+1), null)];const f4=f3[1];const f5=f3[0];if(f5!=""&&!J().ContainsKey(f5))return cO(f4);else { if(f5==""&&fP!=null)fP.$0(f4);const f6=J().Item(f5);if(!f6.ContainsKey(f4))return cO(f4);else { const f7=f6.Item(f4);const f8=f7.cloneNode(true);const f9=new u0030("New_3");const f_=new X("New_5");const f$=fZ.attributes;for(let gj=0, gk=f$.length-1;gj<=gk;gj++){ const ga=f$.item(gj).name.toLowerCase();const gb=f$.item(gj).nodeValue;let gc=gb==""?ga:gb.toLowerCase();f_.set_Item(ga, gc);if(!f9.SAdd(ga))console.warn("Hole mapped twice", ga);} for(let gl=0, gm=fZ.childNodes.length-1;gl<=gm;gl++){ const gd=fZ.childNodes[gl];if(n(gd.nodeType, Node.ELEMENT_NODE))if(!f9.SAdd(gd.nodeName.toLowerCase()))console.warn("Hole filled twice", f4);} const ge=fZ.childNodes.length===1&&n(fZ.firstChild.nodeType, Node.TEXT_NODE);if(ge){ const gf=cP(f8, fZ.firstChild.textContent, f4);const gg=((gn) =>(go) => gn.SAdd(go))(f9);let gh=((gn) =>(go) => { if(go!=null)gn(go.$0);})((gn) => { gg(gn);});gh(gf);} cQ(f8, f9);if(!ge){ for(let gn=0, go=fZ.childNodes.length-1;gn<=go;gn++){ const gi=fZ.childNodes[gn];if(n(gi.nodeType, Node.ELEMENT_NODE))if(gi.hasAttributes())cR(f8, gi);else fS(f8, gi);} } cS(f8, f_);cT(f8, fZ.parentNode, fZ);fZ.parentNode.removeChild(fZ);return;} } break;} } function fS(fY, fZ){ const f0=fZ.nodeName.toLowerCase();const f1=(f5, f6) => { if(f0=="title"&&fZ.hasChildNodes()){ const f7=cW(fZ.textContent);fZ.removeChild(fZ.firstChild);while(f7.hasChildNodes())fZ.appendChild(f7.firstChild);} fT(fZ);return cT(fZ, f5, f6);};S(fY, "[ws-attr-holes]", (f5) => { const f6=dX(f5.getAttribute("ws-attr-holes"), [" "], 1);for(let f_=0, f$=f6.length-1;f_<=f$;f_++){ const f7=i(f6, f_);let f8=new RegExp("\\${"+f0+"}", "ig");let f9=f5.getAttribute(f7).replace(f8, fZ.textContent);f5.setAttribute(f7, f9);} });const f2=fY.querySelector("[ws-hole="+f0+"]");if(n(f2, null)){ const f3=fY.querySelector("[ws-replace="+f0+"]");if(n(f3, null)){ const f4=fY.querySelector("slot[name="+f0+"]");return fY.tagName.toLowerCase()=="template"?(f1(f4.parentNode, f4),void f4.parentNode.removeChild(f4)):null;} else { f1(f3.parentNode, f3);f3.parentNode.removeChild(f3);return;} } else { while(f2.hasChildNodes())f2.removeChild(f2.lastChild);f2.removeAttribute("ws-hole");return f1(f2, null);} } function fT(fY){ if(!fY.hasAttribute("ws-preserve"))if(dY(fY.nodeName.toLowerCase(), "ws-"))fV(fY);else { cU(fY);fU(fY.firstChild);} } function fU(fY){ return fR(0, fY);} function fV(fY){ return fR(1, fY);} function fW(fY){ while(true){ const fZ=fY.querySelector("[ws-template]");if(n(fZ, null)){ const f0=fY.querySelector("[ws-children-template]");if(n(f0, null)){ const f1=fY.querySelectorAll("template[id]");for(let f7=1, f8=f1.length-1;f7<=f8;f7++){ const f2=f1[f7];if(fQ.Contains(f2)){ } else { P(fM, D(f2.getAttribute("id")), f2, null);fQ.SAdd(f2);} } const f3=fY.querySelectorAll("template[name]");for(let f9=1, f_=f3.length-1;f9<=f_;f9++){ const f4=f3[f9];if(fQ.Contains(f4)){ } else { P(fM, D(f4.getAttribute("name")), f4, null);fQ.SAdd(f4);} } return null;} else { const f5=f0.getAttribute("ws-children-template");f0.removeAttribute("ws-children-template");P(fM, D(f5), f0, null);fY=fY;} } else { const f6=fZ.getAttribute("ws-template");(T(fM, D(f6), fZ))(null);fY=fY;} } } const fX=(fN==null?"":fN.$0).toLowerCase();K(fM).set_Item(fX, fO);if(fO.hasChildNodes()){ fW(fO);fU(fO.firstChild);} }
function Q(fM, fN){ let fO;const fP=[];const fQ=[];const fR=[];const fS=[];const fT=new X("New_5");const fU=bK(fN);try { while(fU.MoveNext()){ const fV=fU.Current;fT.set_Item(fV.Name, fV);} } finally { if(typeof fU=="object"&&a(fU))fU.Dispose();} let fW=cX(fM);const fX=(f6, f7) => { const f8=dk(f6, f7);fQ.push(dl(f8));fR.push([f6, f8]);const f9=fG(f8.OnAfterRender);if(f9==null)return null;else { const f_=f9.$0;fS.push(() => { f_(f6);});return;} };const fY=(f6) => { let f7;const f8=(f7=null,[fT.TryGetValue(f6, {get:() => f7, set:(f$) => { f7=f$;}}), f7]);if(f8[0]){ const f9=f8[1];if(f9 instanceof dB)return D(f9.Value);else if(f9 instanceof dC)return D(W.TextNode(f9.Value));else { const f_=f9.ForTextView();return f_==null?null:D(W.TextView(f_.$0));} } else return null;};S(fM, "[ws-hole]", (f6) => { const f7=f6.getAttribute("ws-hole");f6.removeAttribute("ws-hole");while(f6.hasChildNodes())f6.removeChild(f6.lastChild);const f8=fY(f7);if(f8!=null&&f8.$==1){ const f9=f8.$0;cd(f6, f9.docNode);fP.push(cx.New(dm(f6), f9.docNode, null, f6, cy(), null));fQ.push(f9.updates);} });S(fM, "[ws-replace]", (f6) => { const f7=fY(f6.getAttribute("ws-replace"));if(f7!=null&&f7.$==1){ const f8=f7.$0;const f9=f6.parentNode;const f_=globalThis.document.createTextNode("");f9.replaceChild(f_, f6);const f$=ci(f_, f8.docNode);fW=cX(fM);const ga=bg((gb) => f6===gb, fW);if(ga==null){ } else j(fW, ga.$0, f8.docNode);fP.push(cx.New(dm(f9), f8.docNode, D([f$, f_]), f9, cy(), null));fQ.push(f8.updates);} });let fZ=false;S(fM, "slot", (f6) => { const f7=f6.getAttribute("name");const f8=f7==""||f7==null?"default":f7.toLowerCase();if(fZ&&f8=="default"||!n(fM.parentElement, null)){ } else { while(f6.hasChildNodes())f6.removeChild(f6.lastChild);if(f8=="default")fZ=true;const f9=fY(f8);if(f9!=null&&f9.$==1){ const f_=f9.$0;cd(f6, f_.docNode);fP.push(cx.New(dm(f6), f_.docNode, null, f6, cy(), null));fQ.push(f_.updates);} } });S(fM, "[ws-attr]", (f6) => { let f7;const f8=f6.getAttribute("ws-attr");f6.removeAttribute("ws-attr");const f9=(f7=null,[fT.TryGetValue(f8, {get:() => f7, set:(f$) => { f7=f$;}}), f7]);if(f9[0]){ const f_=f9[1];if(f_ instanceof dD)fX(f6, f_.Value);else console.warn("Attribute hole filled with non-attribute data", f8);} });S(fM, "[ws-on]", (f6) => { fX(f6, dR.Concat(bf((f7) => { let f8;const f9=dX(f7, [":"], 1);const f_=(f8=null,[fT.TryGetValue(i(f9, 1), {get:() => f8, set:(ga) => { f8=ga;}}), f8]);if(f_[0]){ const f$=f_[1];return f$ instanceof dE?D(dF(i(f9, 0), f$.Value)):f$ instanceof dQ?D(dR.Handler(i(f9, 0), f$.Value)):(console.warn("Event hole on"+i(f9, 0)+" filled with non-event data", i(f9, 1)),null);} else return null;}, dX(f6.getAttribute("ws-on"), [" "], 1))));f6.removeAttribute("ws-on");});S(fM, "[ws-onafterrender]", (f6) => { let f7;const f8=f6.getAttribute("ws-onafterrender");const f9=(f7=null,[fT.TryGetValue(f8, {get:() => f7, set:(f$) => { f7=f$;}}), f7]);if(f9[0]){ const f_=f9[1];if(f_ instanceof dS){ f6.removeAttribute("ws-onafterrender");fX(f6, dG(f_.Value));} else if(f_ instanceof Z){ f6.removeAttribute("ws-onafterrender");fX(f6, dG(f_.Value));} else console.warn("onafterrender hole filled with non-onafterrender data", f8);} });S(fM, "[ws-var]", (f6) => { let f7;const f8=f6.getAttribute("ws-var");f6.removeAttribute("ws-var");const f9=(f7=null,[fT.TryGetValue(f8, {get:() => f7, set:(f_) => { f7=f_;}}), f7]);if(f9[0])f9[1].AddAttribute((f_) =>(f$) => fX(f_, f$), f6);});const f0=() => { U("[ws-dom]", (f6) => { let f7;let f8;let f9;const f_=(f7=null,[fT.TryGetValue(f6.getAttribute("ws-dom").toLowerCase(), {get:() => f7, set:(gc) => { f7=gc;}}), f7]);if(f_[0]){ const f$=f_[1];if(f$ instanceof bB){ const ga=f$.Value;f6.removeAttribute("ws-dom");f8=f6;const gb=new MutationObserver((gc, gd) => { bk((ge) => { ge.removedNodes.forEach(fH((gf) => gf[0]===f8&&ge.addedNodes.length!==1?(ga.SetFinal(null),gd.disconnect()):null), null);}, gc);});if(f6.parentElement!==null)gb.observe(f6.parentElement, (f9={},f9.childList=true,f9));ga.Set(D(f6));cG((gc) => { if(gc!=null&&gc.$==1){ const gd=gc.$0;if(f8===gd){ } else { f8.replaceWith(gd);f8=gd;} } else { f8.remove();gb.disconnect();} }, ga.View);} } });};S(fM, "[ws-attr-holes]", (f6) => { const f7=new RegExp(V(), "g");const f8=dX(f6.getAttribute("ws-attr-holes"), [" "], 1);f6.removeAttribute("ws-attr-holes");for(let f9=0, f_=f8.length-1;f9<=f_;f9++)((() => { let f$;const ga=i(f8, f9);const gb=f6.getAttribute(ga);let gc=null;let gd=0;const ge=[];while(gc=f7.exec(gb),gc!==null){ const gf=cV(gb, D(gd), D(f7.lastIndex-i(gc, 0).length-1));gd=f7.lastIndex;ge.push([gf, i(gc, 1)]);} const gg=cV(gb, D(gd), null);f7.lastIndex=0;const gh=bl((gm, gn) =>(((go) => { const gp=go[0];const gq=go[1];return(gr) => { let gs;const gt=gr[0];const gu=gr[1];const gv=(gs=null,[fT.TryGetValue(gq, {get:() => gs, set:(gx) => { gs=gx;}}), gs]);const gw=gv[0]?gv[1].AsChoiceView:dT("");return gw.$==1?[gp, dV.Cons(gt==""?gw.$0:cH((gx) => gx+gt, gw.$0), gu)]:[gp+gw.$0+gt, gu];};})(gm))(gn), ge, [gg, dV.Empty]);if(gh[1].$==1){ if(gh[1].$1.$==1){ if(gh[1].$1.$1.$==1){ if(gh[1].$1.$1.$1.$==0){ const gi=gh[0];f$=dH(ga, cI((gm, gn, go) => gi+gm+gn+go, gh[1].$0, gh[1].$1.$0, gh[1].$1.$1.$0));} else { const gj=gh[0];f$=dH(ga, cH((gm) => gj+dW("", gm), cJ(gh[1])));} } else { const gk=gh[0];f$=dH(ga, cK((gm, gn) => gk+gm+gn, gh[1].$0, gh[1].$1.$0));} } else if(gh[0]=="")f$=dH(ga, gh[1].$0);else { const gl=gh[0];f$=dH(ga, cH((gm) => gl+gm, gh[1].$0));} } else f$=dR.Create(ga, gh[0]);return fX(f6, f$);})());});let f1=fW;const f2=fS.length==0?D(() => { f0();}):D((f6) => { f0();bk((f7) => { f7(f6);}, fS);});const f3=!n(fW, null)&&fW.length===1&&(i(fW, 0)instanceof Node&&(i(fW, 0)instanceof Element&&(fO=i(fW, 0),true)))?D(fO):null;let f4={Els:f1, Dirty:true, Holes:fP, Attrs:fR, Render:f2?f2.$0:void 0, El:f3?f3.$0:void 0};let f5=fI(f4, ["Render", "El"]);return[f5, d4(cF(), cL, fQ)];}
function R(){ return cc.GlobalHoles;}
function S(fM, fN, fO){ c3(fM, fN, (fP) => { if(fP.closest("[ws-preserve]")==null)fO(fP);});}
function T(fM, fN, fO){ const fP=M(fO);return(fQ) => { P(fM, fN, fP, fQ);};}
function U(fM, fN){ c4(fM, (fO) => { if(fO.closest("[ws-preserve]")==null)fN(fO);});}
function V(){ return cc.TextHoleRE;}
class W extends g { docNode;updates;static RunById(fM, fN){ const fO=globalThis.document.getElementById(fM);if(n(fO, null))d("invalid id: "+fM);else W.Run(fO, fN);} static Run(fM, fN){ cd(fM, fN.docNode);W.RunInPlace(false, fM, fN);} static get Empty(){ return W.Mk(null, cF());} static RunInPlace(fM, fN, fO){ const fP=cf(fN, fO.docNode);cG(c$()||dg()?dh(cg(fM, fP, fO.docNode)):() => { ch(fM, fP, fO.docNode);}, fO.updates);} static Mk(fM, fN){ return new W(fM, fN);} static TextNode(fM){ return W.Mk(bF(globalThis.document.createTextNode(fM)), cF());} static TextView(fM){ const fN=cq();return W.Mk(bG(fN), cH((fO) => { cr(fN, fO);}, fM));} constructor(fM, fN){ super();this.docNode=fM;this.updates=fN;} }
class X extends g { equals;hash;count;data;set_Item(fM, fN){ this.set(fM, fN);} set(fM, fN){ const fO=this.hash(fM);const fP=this.data[fO];if(fP==null){ this.count=this.count+1;this.data[fO]=new Array({K:fM, V:fN});} else { const fQ=bg((fR) => this.equals.apply(null, [(e(fR))[0], fM]), fP);if(fQ==null){ this.count=this.count+1;fP.push({K:fM, V:fN});} else fP[fQ.$0]={K:fM, V:fN};} } TryGetValue(fM, fN){ const fO=this.data[this.hash(fM)];if(fO==null)return false;else { const fP=bh((fQ) => { const fR=e(fQ);return this.equals.apply(null, [fR[0], fM])?D(fR[1]):null;}, fO);return fP!=null&&fP.$==1&&(fN.set(fP.$0),true);} } ContainsKey(fM){ const fN=this.data[this.hash(fM)];return fN==null?false:bi((fO) => this.equals.apply(null, [(e(fO))[0], fM]), fN);} RemoveKey(fM){ return this.remove(fM);} get Keys(){ return new c_(this);} GetEnumerator(){ return bN(bj(B(this.data)));} get Values(){ return new d8(this);} remove(fM){ const fN=this.hash(fM);const fO=this.data[fN];if(fO==null)return false;else { const fP=bn((fQ) =>!this.equals.apply(null, [(e(fQ))[0], fM]), fO);return l(fP)<fO.length&&(this.count=this.count-1,this.data[fN]=fP,true);} } Item(fM){ return this.get(fM);} get(fM){ const fN=this.data[this.hash(fM)];return fN==null?bJ():bp((fO) => { const fP=e(fO);return this.equals.apply(null, [fP[0], fM])?D(fP[1]):null;}, fN);} static New_5(){ return new this("New_5");} static New_6(fM, fN, fO){ return new this("New_6", fM, fN, fO);} constructor(fM, fN, fO, fP){ if(fM=="New_5"){ fM="New_6";fN=[];fO=n;fP=q;} if(fM=="New_6"){ const fQ=fN;const fR=fO;const fS=fP;super();this.equals=fR;this.hash=fS;this.count=0;this.data=[];const fT=bK(fQ);try { while(fT.MoveNext()){ const fU=fT.Current;this.set(fU.K, fU.V);} } finally { if(typeof fT=="object"&&a(fT))fT.Dispose();} } } }
class Y extends g { ForTextView(){ console.warn("Content hole filled with attribute data", this.Name);return null;} AddAttribute(fM, fN){ console.warn("Var hole filled with non-Var data", this.Name);} get AsChoiceView(){ console.warn("Attribute value hole filled with non-text data", this.Name);return dT("");} }
class Z extends Y { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class u0030 extends g { equals;hash;data;count;SAdd(fM){ return this.add(fM);} Contains(fM){ const fN=this.data[this.hash(fM)];return fN==null?false:this.arrContains(fM, fN);} add(fM){ const fN=this.hash(fM);const fO=this.data[fN];return fO==null?(this.data[fN]=[fM],this.count=this.count+1,true):this.arrContains(fM, fO)?false:(fO.push(fM),this.count=this.count+1,true);} arrContains(fM, fN){ let fO=true;let fP=0;const fQ=fN.length;while(fO&&fP<fQ)if(this.equals.apply(null, [fN[fP], fM]))fO=false;else fP=fP+1;return!fO;} GetEnumerator(){ return bK(ez(this.data));} ExceptWith(fM){ const fN=bK(fM);try { while(fN.MoveNext())this.Remove(fN.Current);} finally { if(typeof fN=="object"&&a(fN))fN.Dispose();} } get Count(){ return this.count;} IntersectWith(fM){ const fN=new u0030("New_4", fM, this.equals, this.hash);const fO=ez(this.data);for(let fQ=0, fR=fO.length-1;fQ<=fR;fQ++){ const fP=fO[fQ];if(!fN.Contains(fP))this.Remove(fP);} } Remove(fM){ const fN=this.data[this.hash(fM)];return fN==null?false:this.arrRemove(fM, fN)&&(this.count=this.count-1,true);} CopyTo(fM, fN){ const fO=ez(this.data);for(let fP=0, fQ=fO.length-1;fP<=fQ;fP++)j(fM, fP+fN, fO[fP]);} arrRemove(fM, fN){ let fO=true;let fP=0;const fQ=fN.length;while(fO&&fP<fQ)if(this.equals.apply(null, [fN[fP], fM])){ fN.splice(fP, 1);fO=false;} else fP=fP+1;return!fO;} static New_3(){ return new this("New_3");} static New_4(fM, fN, fO){ return new this("New_4", fM, fN, fO);} static New_2(fM){ return new this("New_2", fM);} constructor(fM, fN, fO, fP){ if(fM=="New_3"){ fM="New_4";fN=[];fO=n;fP=q;} let fQ;if(fM=="New_2"){ fQ=fN;fM="New_4";fN=fQ;fO=n;fP=q;} if(fM=="New_4"){ const fR=fN;const fS=fO;const fT=fP;super();this.equals=fS;this.hash=fT;this.data=[];this.count=0;const fU=bK(fR);try { while(fU.MoveNext())this.add(fU.Current);} finally { if(typeof fU=="object"&&a(fU))fU.Dispose();} } } }
function u0031(fM, fN){ return{GetEnumerator:() => { const fO=bK(fM);const fP=[true];return new bO(fO, null, (fQ) => { if(fQ.s.MoveNext()){ fQ.c=fQ.s.Current;return true;} else { const fR=fQ.s;if(!n(fR, null))fR.Dispose();fQ.s=null;return fP[0]&&(fP[0]=false,fQ.s=bK(fN),fQ.s.MoveNext()?(fQ.c=fQ.s.Current,true):(fQ.s.Dispose(),fQ.s=null,false));} }, (fQ) => { const fR=fQ.s;if(!n(fR, null))fR.Dispose();});}};}
function u0032(fM){ const fN=bK(fM);try { return fN.MoveNext()?fN.Current:c7();} finally { if(typeof fN=="object"&&a(fN))fN.Dispose();} }
function u0033(fM, fN, fO){ let fP=fN;const fQ=bK(fO);try { while(fQ.MoveNext())fP=fM(fP, fQ.Current);return fP;} finally { if(typeof fQ=="object"&&a(fQ))fQ.Dispose();} }
function u0034(fM, fN){ const fO=bK(fN);try { while(fO.MoveNext())fM(fO.Current);} finally { if(typeof fO=="object"&&a(fO))fO.Dispose();} }
function u0035(fM, fN){ return{GetEnumerator:() => { const fO=bK(fN);return new bO(null, null, (fP) => fO.MoveNext()&&(fP.c=fM(fO.Current),true), () => { fO.Dispose();});}};}
function u0036(fM){ return{GetEnumerator:() => bK(fM())};}
function u0037(fM, fN){ return u0039(u0035(fM, fN));}
function u0038(fM){ const fN=bK(fM);try { if(!fN.MoveNext())ba();let fO=fN.Current;while(fN.MoveNext()){ const fP=fN.Current;if(v(fP, fO)===1)fO=fP;} return fO;} finally { if(typeof fN=="object"&&a(fN))fN.Dispose();} }
function u0039(fM){ return{GetEnumerator:() => { const fN=bK(fM);function fO(fP){ while(true){ const fQ=fP.s;if(n(fQ, null)){ if(fN.MoveNext()){ fP.s=bK(fN.Current);fP=fP;} else { fN.Dispose();return false;} } else if(fQ.MoveNext()){ fP.c=fQ.Current;return true;} else { fP.Dispose();fP.s=null;fP=fP;} } } return new bO(null, null, fO, (fP) => { const fQ=fP.s;if(!n(fQ, null))fQ.Dispose();if(!n(fN, null))fN.Dispose();});}};}
function $(fM, fN){ return bb(fM, bc(fN));}
function ba(){ return d("The input sequence was empty.");}
function bb(fM, fN){ fM<0?c9():void 0;return{GetEnumerator:() => { const fO=[bK(fN)];return new bO(0, null, (fP) => { fP.s=fP.s+1;if(fP.s>fM)return false;else { const fQ=fO[0];return n(fQ, null)?c7():fQ.MoveNext()?(fP.c=fQ.Current,fP.s===fM?(fQ.Dispose(),fO[0]=null):void 0,true):(fQ.Dispose(),fO[0]=null,c7());} }, () => { const fP=fO[0];if(!n(fP, null))fP.Dispose();});}};}
function bc(fM){ return{GetEnumerator:() => new bO(0, null, (fN) => { fN.c=fM(fN.s);fN.s=fN.s+1;return true;}, void 0)};}
function bd(fM, fN){ return!be((fO) =>!fM(fO), fN);}
function be(fM, fN){ const fO=bK(fN);try { let fP=false;while(!fP&&fO.MoveNext())fP=fM(fO.Current);return fP;} finally { if(typeof fO=="object"&&a(fO))fO.Dispose();} }
function bf(fM, fN){ const fO=[];for(let fQ=0, fR=fN.length-1;fQ<=fR;fQ++){ const fP=fM(fN[fQ]);if(fP==null){ } else fO.push(fP.$0);} return fO;}
function bg(fM, fN){ let fO=null;let fP=0;while(fP<fN.length&&fO==null){ fM(fN[fP])?fO=D(fP):void 0;fP=fP+1;} return fO;}
function bh(fM, fN){ let fO=null;let fP=0;while(fP<fN.length&&fO==null){ const fQ=fM(fN[fP]);if(fQ!=null&&fQ.$==1)fO=fQ;fP=fP+1;} return fO;}
function bi(fM, fN){ let fO=false;let fP=0;while(!fO&&fP<l(fN))if(fM(fN[fP]))fO=true;else fP=fP+1;return fO;}
function bj(fM){ return Array.prototype.concat.apply([], bo(fM));}
function bk(fM, fN){ for(let fO=0, fP=fN.length-1;fO<=fP;fO++)fM(fN[fO]);}
function bl(fM, fN, fO){ let fP=fO;const fQ=fN.length;for(let fR=1, fS=fQ;fR<=fS;fR++)fP=fM(fN[fQ-fR], fP);return fP;}
function bm(fM, fN){ const fO=new Array(fN.length);for(let fP=0, fQ=fN.length-1;fP<=fQ;fP++)fO[fP]=fM(fN[fP]);return fO;}
function bn(fM, fN){ const fO=[];for(let fP=0, fQ=fN.length-1;fP<=fQ;fP++)if(fM(fN[fP]))fO.push(fN[fP]);return fO;}
function bo(fM){ if(fM instanceof Array)return fM.slice();else if(fM instanceof dV)return bq(fM);else { const fN=[];const fO=bK(fM);try { while(fO.MoveNext())fN.push(fO.Current);return fN;} finally { if(typeof fO=="object"&&a(fO))fO.Dispose();} } }
function bp(fM, fN){ const fO=bh(fM, fN);return fO==null?d("KeyNotFoundException"):fO.$0;}
function bq(fM){ const fN=[];let fO=fM;while(!(fO.$==0)){ fN.push(eW(fO));fO=eX(fO);} return fN;}
function br(fM, fN){ let fO=true;let fP=0;while(fO&&fP<l(fN))if(fM(fN[fP]))fP=fP+1;else fO=false;return fO;}
function bs(fM, fN){ const fO=new Array(fM);for(let fP=0, fQ=fM-1;fP<=fQ;fP++)fO[fP]=fN;return fO;}
function bt(fM, fN){ if(fM<0)d("Negative size given.");else null;const fO=new Array(fM);for(let fP=0, fQ=fM-1;fP<=fQ;fP++)fO[fP]=fN(fP);return fO;}
let bu=fJ((fM) => class fN extends g { static { bu=fM(this);} static init;id;vars;static initialized;static instances;static GetOrAddHoleFor(fO, fP, fQ){ let fR;const fS=bu.GetHolesFor(fO);const fT=(fR=null,[fS.TryGetValue(fP, {get:() => fR, set:(fV) => { fR=fV;}}), fR]);if(fT[0])return fT[1];else { const fU=fQ();fS.set_Item(fP, fU);return fU;} } static GetHolesFor(fO){ let fP;const fQ=(fP=null,[bu.initialized.TryGetValue(fO, {get:() => fP, set:(fS) => { fP=fS;}}), fP]);if(fQ[0])return fQ[1];else { const fR=new X("New_5");bu.initialized.set_Item(fO, fR);return fR;} } static { bu.initialized=new X("New_5");bu.instances=new X("New_5");} });
class bv extends Y { name;fillWith;get Name(){ return this.name;} ForTextView(){ return D(this.fillWith.View);} AddAttribute(fM, fN){(fM(fN))(dI(this.fillWith));} get AsChoiceView(){ return dU(cH(String, this.fillWith.View));} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
let bw=fJ((fM) => class fN extends g { static { bw=fM(this);} static Create_1(fO){ return new bQ(false, {s:cB(fO, [])}, fO);} static { } });
class bx extends Y { name;fillWith;get Name(){ return this.name;} ForTextView(){ return D(cH(String, this.fillWith.View));} AddAttribute(fM, fN){(fM(fN))(dJ(this.fillWith));} get AsChoiceView(){ return dU(cH(String, this.fillWith.View));} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class by extends Y { name;fillWith;get Name(){ return this.name;} ForTextView(){ return D(cH(String, this.fillWith.View));} AddAttribute(fM, fN){(fM(fN))(dK(this.fillWith));} get AsChoiceView(){ return dU(cH(String, this.fillWith.View));} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class bz extends Y { name;fillWith;get Name(){ return this.name;} ForTextView(){ return D(cH((fM) =>(new Date(fM)).toLocaleString(), this.fillWith.View));} AddAttribute(fM, fN){(fM(fN))(dL(this.fillWith));} get AsChoiceView(){ return dU(cH((fM) =>(new Date(fM)).toLocaleString(), this.fillWith.View));} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class bA extends Y { name;fillWith;get Name(){ return this.name;} ForTextView(){ return D(cH(String, this.fillWith.View));} AddAttribute(fM, fN){(fM(fN))(dM(this.fillWith));} get AsChoiceView(){ return dU(cH(String, this.fillWith.View));} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class bB extends Y { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class bC extends Y { name;fillWith;get Name(){ return this.name;} ForTextView(){ return D(cH((fM) => dW(",", fM), this.fillWith.View));} AddAttribute(fM, fN){(fM(fN))(dN(this.fillWith));} get AsChoiceView(){ return dU(cH(String, this.fillWith.View));} constructor(fM, fN){ super();this.name=fM;this.fillWith=fN;} }
class bD extends g { }
function bE(fM){ return{$:6, $0:fM};}
function bF(fM){ return{$:5, $0:fM};}
function bG(fM){ return{$:4, $0:fM};}
class bH { }
function bI(fM, fN){ return fv(fM, -2147483648, 2147483647, fN);}
function bJ(){ throw new eI("New");}
function bK(fM){ return fM instanceof Array?bL(fM):n(typeof fM, "string")?bM(fM):fM.GetEnumerator();}
function bL(fM){ return new bO(0, null, (fN) => { const fO=fN.s;return fO<l(fM)&&(fN.c=i(fM, fO),fN.s=fO+1,true);}, void 0);}
function bM(fM){ return new bO(0, null, (fN) => { const fO=fN.s;return fO<fM.length&&(fN.c=fM[fO],fN.s=fO+1,true);}, void 0);}
function bN(fM){ return fM instanceof Array?bL(fM):n(typeof fM, "string")?bM(fM):"GetEnumerator0"in fM?fM.GetEnumerator0():fM.GetEnumerator();}
class bO extends g { s;c;n;d;e;MoveNext(){ const fM=this.n(this);this.e=fM?1:2;return fM;} get Current(){ return this.e===1?this.c:this.e===0?d("Enumeration has not started. Call MoveNext."):d("Enumeration already finished.");} Dispose(){ if(this.d)this.d(this);} constructor(fM, fN, fO, fP){ super();this.s=fM;this.c=fN;this.n=fO;this.d=fP;this.e=0;} }
class bP extends g { }
class bQ extends bP { isConst;current;snap;view;id;SetFinal(fM){ if(this.isConst)(((fN) => fN("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((fN) => { console.log(fN);}));else { dj(this.snap);this.isConst=true;this.current=fM;this.snap={s:cC(fM)};} } Set(fM){ if(this.isConst)(((fN) => fN("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((fN) => { console.log(fN);}));else { dj(this.snap);this.current=fM;this.snap={s:cB(fM, [])};} } get View(){ return this.view;} Get(){ return this.current;} UpdateMaybe(fM){ const fN=fM(this.Get());if(fN!=null&&fN.$==1)this.Set(fN.$0);} constructor(fM, fN, fO){ super();this.isConst=fM;this.current=fO;this.snap=fN;this.view=() => this.snap;this.id=cy();} }
function bR(fM, fN, fO){ const fP=fM.s;if(fP==null)fO();else fP!=null&&fP.$==2?(fP.$1.push(fO),fN(fP.$0)):fP!=null&&fP.$==3?(fP.$0.push(fN),fP.$1.push(fO)):fN(fP.$0);}
function bS(fM, fN){ const fO=fN.s;if(fO!=null&&fO.$==0)return{s:cC(fM(fO.$0))};else { const fP={s:cD([], [])};bZ(fN, (fQ) => { b0(fP, fN, fM(fQ));}, fP);return fP;} }
function bT(fM, fN, fO, fP){ const fQ=fN.s;const fR=fO.s;const fS=fP.s;if(fQ!=null&&fQ.$==0)return fR!=null&&fR.$==0?fS!=null&&fS.$==0?{s:cC(fM(fQ.$0, fR.$0, fS.$0))}:b1(fM, fQ.$0, fR.$0, fP):fS!=null&&fS.$==0?b2(fM, fQ.$0, fS.$0, fO):b3(fM, fQ.$0, fO, fP);else if(fR!=null&&fR.$==0)return fS!=null&&fS.$==0?b4(fM, fR.$0, fS.$0, fN):b5(fM, fR.$0, fN, fP);else if(fS!=null&&fS.$==0)return b6(fM, fS.$0, fN, fO);else { const fT={s:cD([], [])};const fU=() => { const fV=fT.s;if(!(fV!=null&&fV.$==0||fV!=null&&fV.$==2)){ const fW=b7(fN);const fX=b7(fO);const fY=b7(fP);if(fW!=null&&fW.$==1)if(fX!=null&&fX.$==1)if(fY!=null&&fY.$==1)if(fW.$0[1]&&fX.$0[1]&&fY.$0[1])b8(fT, fM(fW.$0[0], fX.$0[0], fY.$0[0]));else b9(fT, fM(fW.$0[0], fX.$0[0], fY.$0[0]));} };bZ(fN, fU, fT);bZ(fO, fU, fT);bZ(fP, fU, fT);return fT;} }
function bU(fM){ const fN=bo(fM);if(fN.length==0)return{s:cC([])};else { const fO={s:cD([], [])};const fP=[l(fN)-1];const fQ=() => { if(fP[0]===0){ const fR=bm((fS) => { const fT=fS.s;return fT!=null&&fT.$==0?fT.$0:fT!=null&&fT.$==2?fT.$0:d("value not found by View.Sequence");}, fN);if(br((fS) => { const fT=fS.s;return fT!=null&&fT.$==0;}, fN))b8(fO, fR);else b9(fO, fR);} else fP[0]=fP[0]-1;};bk((fR) => { bZ(fR, fQ, fO);}, fN);return fO;} }
function bV(fM, fN, fO){ const fP=fN.s;const fQ=fO.s;if(fP!=null&&fP.$==0)return fQ!=null&&fQ.$==0?{s:cC(fM(fP.$0, fQ.$0))}:b_(fM, fP.$0, fO);else if(fQ!=null&&fQ.$==0)return b$(fM, fQ.$0, fN);else { const fR={s:cD([], [])};const fS=() => { const fT=fR.s;if(!(fT!=null&&fT.$==0||fT!=null&&fT.$==2)){ const fU=b7(fN);const fV=b7(fO);if(fU!=null&&fU.$==1)if(fV!=null&&fV.$==1)if(fU.$0[1]&&fV.$0[1])b8(fR, fM(fU.$0[0], fV.$0[0]));else b9(fR, fM(fU.$0[0], fV.$0[0]));} };bZ(fN, fS, fR);bZ(fO, fS, fR);return fR;} }
function bW(fM, fN){ const fO=fM.s;const fP=fN.s;if(fO!=null&&fO.$==0)return fP!=null&&fP.$==0?{s:cC(null)}:fN;else if(fP!=null&&fP.$==0)return fM;else { const fQ={s:cD([], [])};const fR=() => { const fS=fQ.s;if(!(fS!=null&&fS.$==0||fS!=null&&fS.$==2)){ const fT=b7(fM);const fU=b7(fN);if(fT!=null&&fT.$==1)if(fU!=null&&fU.$==1)if(fT.$0[1]&&fU.$0[1])b8(fQ, null);else b9(fQ, null);} };bZ(fM, fR, fQ);bZ(fN, fR, fQ);return fQ;} }
function bX(fM){ const fN=fM.s;if(fN==null)return fM;else if(fN!=null&&fN.$==2){ const fO={s:cB(fN.$0, [])};ca(fM, fO);return fO;} else if(fN!=null&&fN.$==3){ const fP={s:cD([], [])};bZ(fM, (fQ) => { b0(fP, fM, fQ);}, fP);return fP;} else return fM;}
function bY(fM, fN){ const fO=fM.s;if(fO==null)fN();else fO!=null&&fO.$==2?fO.$1.push(fN):fO!=null&&fO.$==3?fO.$1.push(fN):void 0;}
function bZ(fM, fN, fO){ const fP=fM.s;if(fP==null)dj(fO);else fP!=null&&fP.$==2?(cb(fP.$1, fO),fN(fP.$0)):fP!=null&&fP.$==3?(fP.$0.push(fN),cb(fP.$1, fO)):fN(fP.$0);}
function b0(fM, fN, fO){ const fP=fN.s;if(fP!=null&&fP.$==0)b8(fM, fO);else b9(fM, fO);}
function b1(fM, fN, fO, fP){ return bS((fQ) => fM(fN, fO, fQ), fP);}
function b2(fM, fN, fO, fP){ return bS((fQ) => fM(fN, fQ, fO), fP);}
function b3(fM, fN, fO, fP){ return bV((fQ, fR) => fM(fN, fQ, fR), fO, fP);}
function b4(fM, fN, fO, fP){ return bS((fQ) => fM(fQ, fN, fO), fP);}
function b5(fM, fN, fO, fP){ return bV((fQ, fR) => fM(fQ, fN, fR), fO, fP);}
function b6(fM, fN, fO, fP){ return bV((fQ, fR) => fM(fQ, fR, fN), fO, fP);}
function b7(fM){ const fN=fM.s;return fN!=null&&fN.$==0?D([fN.$0, true]):fN!=null&&fN.$==2?D([fN.$0, false]):null;}
function b8(fM, fN){ const fO=fM.s;if(fO!=null&&fO.$==3){ fM.s=cC(fN);const fP=fO.$0;for(let fQ=0, fR=l(fP)-1;fQ<=fR;fQ++)(i(fP, fQ))(fN);} else void 0;}
function b9(fM, fN){ const fO=fM.s;if(fO!=null&&fO.$==3){ fM.s=cB(fN, fO.$1);const fP=fO.$0;for(let fQ=0, fR=l(fP)-1;fQ<=fR;fQ++)(i(fP, fQ))(fN);} else void 0;}
function b_(fM, fN, fO){ return bS((fP) => fM(fN, fP), fO);}
function b$(fM, fN, fO){ return bS((fP) => fM(fP, fN), fO);}
function ca(fM, fN){ const fO=fM.s;if(fO==null)dj(fN);else fO!=null&&fO.$==2?cb(fO.$1, fN):fO!=null&&fO.$==3?cb(fO.$1, fN):void 0;}
function cb(fM, fN){ fM.push(fN);if(fM.length%20===0){ const fO=fM.slice(0);fB(fM);for(let fQ=0, fR=l(fO)-1;fQ<=fR;fQ++){ const fP=i(fO, fQ);if(typeof fP=="object")(((fS) => { if(fS.s)fM.push(fS);})(fP));else(((fS) => { fM.push(fS);})(fP));} } else void 0;}
let cc=fJ((fM) => class fN { static { cc=fM(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new X("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new X("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function cd(fM, fN){ ce(fM, fN, null);}
function ce(fM, fN, fO){ while(true){ if(fN!=null&&fN.$==1)return cj(fM, fN.$0.El, fO);else if(fN!=null&&fN.$==2){ const fP=fN.$0;fP.Dirty=false;fN=fP.Current;} else if(fN==null)return fO;else if(fN!=null&&fN.$==4)return cj(fM, fN.$0.Text, fO);else if(fN!=null&&fN.$==5)return cj(fM, fN.$0, fO);else if(fN!=null&&fN.$==6)return bl((fS, fT) =>((((fU) =>(fV) =>(fW) => fV==null||fV.constructor===Object?ce(fU, fV, fW):cj(fU, fV, fW))(fM))(fS))(fT), fN.$0.Els, fO);else { const fQ=fN.$1;const fR=fN.$0;fN=fR;fO=ce(fM, fQ, fO);} } }
function cf(fM, fN){ return d9(d_(), ck(fM, dq(), fN));}
function cg(fM, fN, fO){ if(c$()){ const fP=null;return ef(() => { const fQ=d$(fO);const fR=co(fN, fQ);const fS=cn(fN, fQ);return eg(da(db(fR, cm(fN, fQ))), () => eg(cl(fM, fN), () => eg(da(fS), () => { fN.PreviousNodes=fQ;return ej(null);})));});} else return cl(fM, fN);}
function ch(fM, fN, fO){ const fP=d$(fO);cp(fM, fN.Top);fN.PreviousNodes=fP;}
function ci(fM, fN){ const fO=fM.parentNode;const fP=globalThis.document.createTextNode("");fO.insertBefore(fP, fM);cs(fM, fN);return fP;}
function cj(fM, fN, fO){ c5(fM, fO, fN);return fN;}
function ck(fM, fN, fO){ cd(fM, fO);const fP=dk(fM, fN);return cx.New(fP, fO, null, fM, cy(), fG(fP.OnAfterRender));}
function cl(fM, fN){ if(dg()){ const fO=(fP) => { requestAnimationFrame(() => { cp(fM, fN.Top);fP();});};return eo((fP, fQ, fR) => fO.apply(null, [fP, fQ, fR]));} else { cp(fM, fN.Top);return ej(null);} }
function cm(fM, fN){ return de(bm((fO) => ds(fO.Attr), ed(ec(fN, eb((fO) => dr(fO.Attr), fM.PreviousNodes)))));}
function cn(fM, fN){ return de(bm((fO) => du(fO.Attr), ed(ec(fM.PreviousNodes, eb((fO) => dt(fO.Attr), fN)))));}
function co(fM, fN){ const fO=(fQ) => dv(fQ.Attr);const fP=(fQ) => eb(fO, fQ);return de(bm((fQ) => dw(fQ.Attr), ed(ee(fP(fM.PreviousNodes), fP(fN)))));}
function cp(fM, fN){!fM?ct(fN):void 0;cu(fN.Children);cv(fN);}
function cq(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function cr(fM, fN){ fM.Value=fN;fM.Dirty=true;}
function cs(fM, fN){ ce(fM.parentNode, fN, fM);}
function ct(fM){ function fN(fO){ function fP(fQ){ while(true){ if(fQ!=null&&fQ.$==0){ const fR=fQ.$1;const fS=fQ.$0;if(fP(fS))return true;else fQ=fR;} else if(fQ!=null&&fQ.$==2){ const fT=fQ.$0;if(fT.Dirty)return true;else fQ=fT.Current;} else if(fQ!=null&&fQ.$==6){ const fU=fQ.$0;return fU.Dirty||bi(fN, fU.Holes);} else return false;} } return fP(fO.Children);} dz(fM.El, fM.Attr);if(fN(fM))cw(fM);}
function cu(fM){ while(true){ if(fM!=null&&fM.$==1)return cp(false, fM.$0);else if(fM!=null&&fM.$==2){ const fN=fM.$0;fM=fN.Current;} else if(fM==null)return null;else if(fM!=null&&fM.$==5)return null;else if(fM!=null&&fM.$==4){ const fO=fM.$0;return fO.Dirty?(fO.Text.nodeValue=fO.Value,fO.Dirty=false):null;} else if(fM!=null&&fM.$==6){ const fP=fM.$0;bk((fS) => { cp(false, fS);}, fP.Holes);bk((fS) => { dz(fS[0], fS[1]);}, fP.Attrs);return cv(fP);} else { const fQ=fM.$1;const fR=fM.$0;cu(fR);fM=fQ;} } }
function cv(fM){ const fN=fG(fM.Render);if(fN!=null&&fN.$==1){ fN.$0(fM.El);fF(fM, "Render", null);} }
function cw(fM){ const fN=fM.El;function fO(fS, fT){ while(true){ if(fS!=null&&fS.$==1)return fS.$0.El;else if(fS!=null&&fS.$==2){ const fU=fS.$0;if(fU.Dirty){ fU.Dirty=false;return ce(fN, fU.Current, fT);} else fS=fU.Current;} else if(fS==null)return fT;else if(fS!=null&&fS.$==4)return fS.$0.Text;else if(fS!=null&&fS.$==5)return fS.$0;else if(fS!=null&&fS.$==6){ const fV=fS.$0;if(fV.Dirty)fV.Dirty=false;return bl((fY, fZ) => fY==null||fY.constructor===Object?fO(fY, fZ):fY, fV.Els, fT);} else { const fW=fS.$1;const fX=fS.$0;fS=fX;fT=fO(fW, fT);} } } const fP=fM.El;fq((fS) => { c6(fP, fS);}, fp(fr(fM), fo(fM.El, fG(fM.Delimiters))));let fQ=fM.Children;const fR=fG(fM.Delimiters);fO(fQ, fR!=null&&fR.$==1?fR.$0[1]:null);}
class cx { Attr;Children;Delimiters;El;ElKey;Render;Equals(fM){ return this.ElKey===fM.ElKey;} GetHashCode(){ return this.ElKey;} static New(fM, fN, fO, fP, fQ, fR){ const fS={Attr:fM, Children:fN, El:fP, ElKey:fQ};let fT=(fF(fS, "Delimiters", fO),fF(fS, "Render", fR),fS);return fK(cx, fT);} }
function cy(){ cz(cA()+1);return cA();}
function cz(fM){ eA.counter=fM;}
function cA(){ return eA.counter;}
function cB(fM, fN){ return{$:2, $0:fM, $1:fN};}
function cC(fM){ return{$:0, $0:fM};}
function cD(fM, fN){ return{$:3, $0:fM, $1:fN};}
class cE extends W { docNode_1;updates_1;elt;rvUpdates;static TreeNode(fM, fN){ const fO=d7.Create(fN);const fP=bm((fS) => dl(fS[1]), fM.Attrs);let fQ=d4(cF(), cL, fP);let fR=cL(fQ, fO.v);return new cE(bE(fM), fR, i(fM.Els, 0), fO);} constructor(fM, fN, fO, fP){ super(fM, fN);this.docNode_1=fM;this.updates_1=fN;this.elt=fO;this.rvUpdates=fP;} }
function cF(fM){ const fN={s:cC(fM)};return() => fN;}
function cG(fM, fN){ function fO(){ bR(fN(), fM, () => { ek().Fork(fO);});} ek().Fork(fO);}
function cH(fM, fN){ return cM(() => bS(fM, fN()));}
function cI(fM, fN, fO, fP){ return cM(() => bT(fM, fN(), fO(), fP()));}
function cJ(fM){ return cM(() => bU(u0035((fN) => fN(), fM)));}
function cK(fM, fN, fO){ return cM(() => bV(fM, fN(), fO()));}
function cL(fM, fN){ return cM(() => bW(fM(), fN()));}
function cM(fM){ const fN={c:null, o:fM};return() => { let fO=fN.c;if(fO===null){ fO=fN.o();fN.c=fO;const fP=fO.s;if(fP!=null&&fP.$==0)fN.o=null;else bY(fO, () => { fN.c=null;});return fO;} else return fO;};}
function cN(fM){ let fN=null;let fO=0;const fP=fM.textContent;const fQ=new RegExp(V(), "g");while(fN=fQ.exec(fP),fN!==null){ fM.parentNode.insertBefore(globalThis.document.createTextNode(cV(fP, D(fO), D(fQ.lastIndex-i(fN, 0).length-1))), fM);fO=fQ.lastIndex;const fR=globalThis.document.createElement("span");fR.setAttribute("ws-replace", i(fN, 1).toLowerCase());fM.parentNode.insertBefore(fR, fM);} fQ.lastIndex=0;fM.textContent=cV(fP, D(fO), null);}
function cO(fM){ console.warn("Instantiating non-loaded template", fM);}
function cP(fM, fN, fO){ const fP=fM.querySelector("[ws-replace]");return n(fP, null)?(console.warn("Filling non-existent text hole", fO),null):(fP.parentNode.replaceChild(globalThis.document.createTextNode(fN), fP),D(fP.getAttribute("ws-replace")));}
function cQ(fM, fN){ const fO=(fP) => { S(fM, "["+fP+"]", (fQ) => { if(!fN.Contains(fQ.getAttribute(fP)))fQ.removeAttribute(fP);});};fO("ws-attr");fO("ws-onafterrender");fO("ws-var");S(fM, "[ws-hole]", (fP) => { if(!fN.Contains(fP.getAttribute("ws-hole"))){ fP.removeAttribute("ws-hole");while(fP.hasChildNodes())fP.removeChild(fP.lastChild);} });S(fM, "[ws-replace]", (fP) => { if(!fN.Contains(fP.getAttribute("ws-replace")))fP.parentNode.removeChild(fP);});S(fM, "[ws-on]", (fP) => { fP.setAttribute("ws-on", dW(" ", bn((fQ) => fN.Contains(i(dX(fQ, [":"], 1), 1)), dX(fP.getAttribute("ws-on"), [" "], 1))));});S(fM, "[ws-attr-holes]", (fP) => { const fQ=dX(fP.getAttribute("ws-attr-holes"), [" "], 1);for(let fU=0, fV=fQ.length-1;fU<=fV;fU++){ const fR=i(fQ, fU);let fS=new RegExp(V(), "g");let fT=fP.getAttribute(fR).replace(fS, (fW, fX) => fN.Contains(fX)?fW:"");fP.setAttribute(fR, fT);} });}
function cR(fM, fN){ cU(fN);const fO=fN.nodeName.toLowerCase();const fP=fM.querySelector("[ws-attr="+fO+"]");if(n(fP, null))console.warn("Filling non-existent attr hole", fO);else { fP.removeAttribute("ws-attr");for(let fR=0, fS=fN.attributes.length-1;fR<=fS;fR++){ const fQ=fN.attributes.item(fR);if(fQ.name=="class"&&fP.hasAttribute("class"))fP.setAttribute("class", fP.getAttribute("class")+" "+fQ.nodeValue);else fP.setAttribute(fQ.name, fQ.nodeValue);} } }
function cS(fM, fN){ const fO=(fP) => { S(fM, "["+fP+"]", (fQ) => { let fR;const fS=(fR=null,[fN.TryGetValue(fQ.getAttribute(fP).toLowerCase(), {get:() => fR, set:(fT) => { fR=fT;}}), fR]);if(fS[0])fQ.setAttribute(fP, fS[1]);});};fO("ws-hole");fO("ws-replace");fO("ws-attr");fO("ws-onafterrender");fO("ws-var");S(fM, "[ws-on]", (fP) => { fP.setAttribute("ws-on", dW(" ", bm((fQ) => { let fR;const fS=dX(fQ, [":"], 1);const fT=(fR=null,[fN.TryGetValue(i(fS, 1), {get:() => fR, set:(fU) => { fR=fU;}}), fR]);return fT[0]?i(fS, 0)+":"+fT[1]:fQ;}, dX(fP.getAttribute("ws-on"), [" "], 1))));});S(fM, "[ws-attr-holes]", (fP) => { const fQ=dX(fP.getAttribute("ws-attr-holes"), [" "], 1);for(let fR=0, fS=fQ.length-1;fR<=fS;fR++)((() => { const fT=i(fQ, fR);return fP.setAttribute(fT, u0033((fU, fV) => { const fW=e(fV);return fU.replace(new RegExp("\\${"+fW[0]+"}", "ig"), "${"+fW[1]+"}");}, fP.getAttribute(fT), fN));})());});}
function cT(fM, fN, fO){ while(true){ if(fM.hasChildNodes())fO=fN.insertBefore(fM.lastChild, fO);else return null;} }
function cU(fM){ const fN=fM.attributes;const fO=[];const fP=[];const fQ=[];for(let fV=0, fW=fN.length-1;fV<=fW;fV++){ const fR=fN.item(fV);if(dY(fR.nodeName, "ws-on")&&fR.nodeName!="ws-onafterrender"&&fR.nodeName!="ws-on"){ fO.push(fR.nodeName);fP.push(cV(fR.nodeName, D("ws-on".length), null)+":"+fR.nodeValue.toLowerCase());} else if(!dY(fR.nodeName, "ws-")&&(new RegExp(V())).test(fR.nodeValue)){ let fS=new RegExp(V(), "g");let fT=fR.nodeValue.replace(fS, (fX, fY) =>"${"+fY.toLowerCase()+"}");fR.nodeValue=fT;fQ.push(fR.nodeName);} else void 0;} if(!(fP.length==0))fM.setAttribute("ws-on", dW(" ", fP));if(!(fQ.length==0))fM.setAttribute("ws-attr-holes", dW(" ", fQ));const fU=(fX) => { const fY=fM.getAttribute(fX);if(fY==null){ } else fM.setAttribute(fX, fY.toLowerCase());};fU("ws-hole");fU("ws-replace");fU("ws-attr");fU("ws-onafterrender");fU("ws-var");bk((fX) => { fM.removeAttribute(fX);}, fO);}
function cV(fM, fN, fO){ if(fN==null){ if(fO!=null&&fO.$==1){ const fP=fO.$0;return fP<0?"":fM.slice(0, fP+1);} else return"";} else if(fO==null)return fM.slice(fN.$0);else { const fQ=fO.$0;return fQ<0?"":fM.slice(fN.$0, fQ+1);} }
function cW(fM){ const fN=globalThis.document.createElement("div");if(!cY().test(fM)){ fN.appendChild(globalThis.document.createTextNode(fM));return fN;} else { const fO=c2().exec(fM);const fP=n(fO, null)?"":i(fO, 1).toLowerCase();const fQ=(cZ())[fP];const fR=fQ?fQ:c0();fN.innerHTML=fR[1]+fM.replace(c1(), "<$1></$2>")+fR[2];function fS(fT, fU){ while(true){ if(fU===0)return fT;else { const fV=fU;fT=fT.lastChild;fU=fV-1;} } } return fS(fN, fR[0]);} }
function cX(fM){ const fN=[];for(let fO=0, fP=fM.childNodes.length-1;fO<=fP;fO++)fN.push(fM.childNodes[fO]);return fN;}
function cY(){ return eB.rhtml;}
function cZ(){ return eB.wrapMap;}
function c0(){ return eB.defaultWrap;}
function c1(){ return eB.rxhtmlTag;}
function c2(){ return eB.rtagName;}
function c3(fM, fN, fO){ const fP=fM.querySelectorAll(fN);for(let fQ=0, fR=fP.length-1;fQ<=fR;fQ++)fO(fP[fQ]);}
function c4(fM, fN){ const fO=globalThis.document.querySelectorAll(fM);for(let fP=0, fQ=fO.length-1;fP<=fQ;fP++)fN(fO[fP]);}
function c5(fM, fN, fO){ let fP;if(fO.parentNode===fM){ const fQ=fO.nextSibling;let fR=n(fQ, null)?null:fQ;fP=fN===fR;} else fP=false;if(!fP)fM.insertBefore(fO, fN);}
function c6(fM, fN){ if(fN.parentNode===fM)fM.removeChild(fN);}
function c7(){ return d("The input sequence has an insufficient number of elements.");}
function c8(fM, fN){ let fO=true;let fP=0;while(fO&&fP<l(fN))if(n(fN[fP], fM))fO=false;else fP=fP+1;return!fO;}
function c9(){ return d("The input must be non-negative.");}
class c_ extends g { d;GetEnumerator(){ return bK(u0035((fM) => fM.K, this.d));} constructor(fM){ super();this.d=fM;} }
function c$(){ return eq();}
function da(fM){ const fN=null;return ef(() => eg(dc(() => { }, er(fM)), () => { es(fM);return ej(null);}));}
function db(fM, fN){ return dd(eD(fM.$0, fN.$0));}
function dc(fM, fN){ const fO=fN.Duration;if(fO===0)return eh();else { const fP=(fQ) => { function fR(fS){ return(fT) => { const fU=fT-fS;fN.Compute(fU);fM();return fU<=fO?void requestAnimationFrame((fV) => {(fR(fS))(fV);}):fQ();};} requestAnimationFrame((fS) => {(fR(fS))(fS);});};return eo((fQ, fR, fS) => fP.apply(null, [fQ, fR, fS]));} }
function dd(fM){ return{$:0, $0:fM};}
function de(fM){ return dd(eF(u0035(eu, fM)));}
function df(){ return dd(eG());}
function dg(){ return ey.BatchUpdatesEnabled;}
function dh(fM){ const fN=[0];function fO(){ const fP=null;return ef(() => eg(fM, () => { const fQ=fN[0];return n(fQ, 1)?(fN[0]=0,eh()):n(fQ, 2)?(fN[0]=1,fO()):eh();}));} return() => { const fP=fN[0];if(n(fP, 0)){ fN[0]=1;ei(fO(), null);} else n(fP, 1)?fN[0]=2:void 0;};}
function di(fM, fN, fO, fP){ const fQ={DynElem:fM, DynFlags:fN, DynNodes:fO};fF(fQ, "OnAfterRender", fP);return fQ;}
function dj(fM){ let fN;const fO=fM.s;if(fO==null||(fO!=null&&fO.$==2?(fN=fO.$1,false):fO!=null&&fO.$==3?(fN=fO.$1,false):true))void 0;else { fM.s=null;for(let fQ=0, fR=l(fN)-1;fQ<=fR;fQ++){ const fP=i(fN, fQ);if(typeof fP=="object")(((fS) => { dj(fS);})(fP));else fP();} } }
function dk(fM, fN){ const fO=[];const fP=[];function fQ(fT){ while(true){ if(!(fT===null)){ if(fT!=null&&fT.$==1)return fO.push(fT.$0);else if(fT!=null&&fT.$==2){ const fU=fT.$1;const fV=fT.$0;fQ(fV);fT=fU;} else return fT!=null&&fT.$==3?fT.$0(fM):fT!=null&&fT.$==4?fP.push(fT.$0):null;} else return null;} } fQ(fN);const fR=fO.slice(0);let fS=di(fM, dn(fN), fR, fP.length===0?null:D((fT) => { u0034((fU) => { fU(fT);}, fP);}));return fS;}
function dl(fM){ return d5((fN) => fN.NChanged, cF(), cL, fM.DynNodes);}
function dm(fM){ return di(fM, 0, [], null);}
function dn(fM){ return fM!==null&&fM.hasOwnProperty("flags")?fM.flags:0;}
function do_1(fM){ return dR.A3(fM);}
function dp(fM, fN){ return dR.A1(new eH(fM, fN));}
function dq(){ return eJ.EmptyAttr;}
function dr(fM){ const fN=2;return(fM.DynFlags&fN)===fN;}
function ds(fM){ return dy(fM, (fN, fO) => fN.NGetExitAnim(fO));}
function dt(fM){ const fN=1;return(fM.DynFlags&fN)===fN;}
function du(fM){ return dy(fM, (fN, fO) => fN.NGetEnterAnim(fO));}
function dv(fM){ const fN=4;return(fM.DynFlags&fN)===fN;}
function dw(fM){ return dy(fM, (fN, fO) => fN.NGetChangeAnim(fO));}
function dx(fM, fN){ if(fM===null)return fN;else if(fN===null)return fM;else { const fO=dR.A2(fM, fN);dA(fO, dn(fM)|dn(fN));return fO;} }
function dy(fM, fN){ return de(bm((fO) => fN(fO, fM.DynElem), fM.DynNodes));}
function dz(fM, fN){ bk((fO) => { fO.NSync(fM);}, fN.DynNodes);}
function dA(fM, fN){ fM.flags=fN;}
class dB extends Y { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class dC extends Y { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} get AsChoiceView(){ return dT(this.fillWith);} }
class dD extends Y { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class dE extends Y { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function dF(fM, fN){ return do_1((fO) => { fO.addEventListener(fM, (fP) =>(fN(fO))(fP), false);});}
function dG(fM){ return dR.A4(fM);}
function dH(fM, fN){ return dp(fN, (fO) =>(fP) => fO.setAttribute(fM, fP));}
function dI(fM){ return dO(ff(), fM);}
function dJ(fM){ return dO(fg(), fM);}
function dK(fM){ return dO(fh(), fM);}
function dL(fM){ return dO(fi(), fM);}
function dM(fM){ return dO(fj(), fM);}
function dN(fM){ return dO(fk(), fM);}
function dO(fM, fN){ const fO=fM(fN);return dR.Append(do_1(fO[0]), dP(fO[1], fO[2]));}
function dP(fM, fN){ return dp(fN, fM);}
class dQ extends Y { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class dR { static Handler(fM, fN){ return dR.HandlerImpl(fM, fN);} static Concat(fM){ const fN=d6(fM);return d4(dq(), dR.Append, fN);} static Create(fM, fN){ return do_1((fO) => { fO.setAttribute(fM, fN);});} static HandlerImpl(fM, fN){ return do_1((fO) => { fO.addEventListener(fM, (fP) =>(fN(fO))(fP), false);});} static Append(fM, fN){ return dx(fM, fN);} static A4(fM){ return fK(dR, {$:4, $0:fM});} static A3(fM){ return fK(dR, {$:3, $0:fM});} static A1(fM){ return fK(dR, {$:1, $0:fM});} static A2(fM, fN){ return fK(dR, {$:2, $0:fM, $1:fN});} }
class dS extends Y { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function dT(fM){ return{$:0, $0:fM};}
function dU(fM){ return{$:1, $0:fM};}
class dV { static Cons(fM, fN){ return fK(dV, {$:1, $0:fM, $1:fN});} static Empty=fK(dV, {$:0});GetEnumerator(){ return new bO(this, null, (fM) => { const fN=fM.s;return fN.$==0?false:(fM.c=fN.$0,fM.s=fN.$1,true);}, void 0);} }
function dW(fM, fN){ return bo(fN).join(fM);}
function dX(fM, fN, fO){ return dZ(fM, new RegExp("["+d0(fN.join(""))+"]"), fO);}
function dY(fM, fN){ return fM.substring(0, fN.length)==fN;}
function dZ(fM, fN, fO){ return fO===1?bn((fP) => fP!=="", d1(fM, fN)):d1(fM, fN);}
function d0(fM){ return fM.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function d1(fM, fN){ return fM.split(fN);}
function d2(fM, fN){ return bd(fM, d3(fN));}
function d3(fM){ return fM==null?"":fM;}
function d4(fM, fN, fO){ const fP=l(fO);function fQ(fR){ return(fS) => { let fT;switch(fS<=0?0:fS===1?fR>=0&&fR<fP?1:(fT=fS,2):(fT=fS,2)){ case 0:return fM;case 1:return i(fO, fR);case 2:const fU=fS/2>>0;return fN((fQ(fR))(fU), (fQ(fR+fU))(fS-fU));} };} return(fQ(0))(fP);}
function d5(fM, fN, fO, fP){ const fQ=l(fP);function fR(fS){ return(fT) => { let fU;switch(fT<=0?0:fT===1?fS>=0&&fS<fQ?1:(fU=fT,2):(fU=fT,2)){ case 0:return fN;case 1:return fM(i(fP, fS));case 2:const fV=fT/2>>0;return fO((fR(fS))(fV), (fR(fS+fV))(fT-fV));} };} return(fR(0))(fQ);}
function d6(fM){ if(fM instanceof Array)return fM;else if(fM instanceof dV)return bq(fM);else if(fM===null)return[];else { const fN=[];const fO=bK(fM);try { while(fO.MoveNext())fN.push(fO.Current);return fN;} finally { if(typeof fO=="object"&&a(fO))fO.Dispose();} } }
class d7 { c;s;v;static Create(fM){ let fN;fN=null;fN=d7.New(fM, null, () => { let fO;fO=fN.s;return fO===null?(fO=bX(fN.c()),fN.s=fO,bY(fO, () => { fN.s=null;}),fO):fO;});return fN;} static New(fM, fN, fO){ return fK(d7, {c:fM, s:fN, v:fO});} }
class d8 extends g { d;GetEnumerator(){ return bK(u0035((fM) => fM.V, this.d));} constructor(fM){ super();this.d=fM;} }
function d9(fM, fN){ return{PreviousNodes:fM, Top:fN};}
function d_(){ return ea(new u0030("New_3"));}
function d$(fM){ const fN=[];function fO(fR, fS){ while(true)switch(fR){ case 0:if(fS!=null&&fS.$==0){ const fT=fS.$1;const fU=fS.$0;fO(0, fU);fS=fT;} else if(fS!=null&&fS.$==1){ const fV=fS.$0;fS=fV;fR=1;} else if(fS!=null&&fS.$==2){ const fW=fS.$0;fS=fW.Current;} else if(fS!=null&&fS.$==6){ const fX=fS.$0.Holes;return(((fY) =>(fZ) => { bk(fY, fZ);})(fQ))(fX);} else return null;break;case 1:fN.push(fS);fS=fS.Children;fR=0;break;} } function fP(fR){ return fO(0, fR);} function fQ(fR){ return fO(1, fR);} fP(fM);return ea(new u0030("New_2", fN));}
function ea(fM){ return{$:0, $0:fM};}
function eb(fM, fN){ return ea(eS(fM, fN.$0));}
function ec(fM, fN){ return ea(eT(fM.$0, fN.$0));}
function ed(fM){ return eU(fM.$0);}
function ee(fM, fN){ return ea(eV(fM.$0, fN.$0));}
function ef(fM){ return(fN) => { try {(fM())(fN);} catch(fO){ fN.k(eN(fO));} };}
function eg(fM, fN){ return el((fO) => { fM(eM((fP) => { if(fP.$==0){ const fQ=fP.$0;ek().Fork(() => { try {(fN(fQ))(fO);} catch(fR){ fO.k(eN(fR));} });} else ek().Fork(() => { fO.k(fP);});}, fO.ct));});}
function eh(){ return eQ.Zero;}
function ei(fM, fN){ const fO=(em())[0];const fP=fN==null?fO:fN.$0;ek().Fork(() => { if(!fP.c)fM(eM((fQ) => { if(fQ.$==1)en(fQ.$0);}, fP));});}
function ej(fM){ return(fN) => { fN.k(eO(fM));};}
function ek(){ return eQ.scheduler;}
function el(fM){ return(fN) => { if(fN.ct.c)ep(fN);else fM(fN);};}
function em(){ return eQ.defCTS;}
function en(fM){ console.log("WebSharper: Uncaught asynchronous exception", fM);}
function eo(fM){ return(fN) => { const fO=[false];const fP=(fQ) => { if(fO[0])d("A continuation provided by Async.FromContinuations was invoked multiple times");else { fO[0]=true;ek().Fork(fQ);} };fM((fQ) => { fP(() => { fN.k(eO(fQ));});}, (fQ) => { fP(() => { fN.k(eN(fQ));});}, (fQ) => { fP(() => { fN.k(eP(fQ));});});};}
function ep(fM){ fM.k(eP(new fw("New", fM.ct)));}
function eq(){ return eC.UseAnimations;}
function er(fM){ return et(bf((fN) => fN.$==1?D(fN.$0):null, eE(fM.$0)));}
function es(fM){ bk((fN) => { if(fN.$==0)fN.$0();}, eE(fM.$0));}
function et(fM){ const fN=d6(fM);const fO=l(fN);if(fO===0)return ev();else if(fO===1)return i(fN, 0);else { const fP=u0038(u0035((fR) => fR.Duration, fN));const fQ=bm((fR) => ex(fP, fR), fN);return ew(fP, (fR) => { bk((fS) => { fS.Compute(fR);}, fQ);});} }
function eu(fM){ return fM.$0;}
function ev(fM){ return ew(0, () => fM);}
function ew(fM, fN){ return{Compute:fN, Duration:fM};}
function ex(fM, fN){ const fO=fN.Compute;const fP=fN.Duration;const fQ=fx(() => fN.Compute(fN.Duration));return{Compute:(fR) => fR>=fP?fQ.f():fO(fR), Duration:fM};}
let ey=fJ((fM) => class fN { static { ey=fM(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
function ez(fM){ let fN=[];let fO;for(var fP in fM)fN.push.apply(fN, fM[fP]);return fN;}
let eA=fJ((fM) => class fN { static { eA=fM(this);} static counter;static { this.counter=0;} });
let eB=fJ((fM) => class fN { static { eB=fM(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const fO=[1, "<table>", "</table>"];let fP=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", fO], ["tbody", fO], ["tfoot", fO], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=fP;this.defaultWrap=[0, "", ""];} });
let eC=fJ((fM) => class fN { static { eC=fM(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=eL.Custom((fO) => { const fP=fO*fO;return 3*fP-2*(fP*fO);});this.UseAnimations=true;} });
function eD(fM, fN){ return fM.$==0?fN:fN.$==0?fM:{$:2, $0:fM, $1:fN};}
function eE(fM){ const fN=[];function fO(fP){ while(true){ if(fP.$==1)return fN.push(fP.$0);else if(fP.$==2){ const fQ=fP.$1;const fR=fP.$0;fO(fR);fP=fQ;} else return fP.$==3?bk((fS) => { fN.push(fS);}, fP.$0):null;} } fO(fM);return fN.slice(0);}
function eF(fM){ const fN=d6(fM);return d4(eG(), eD, fN);}
function eG(){ return fA.Empty;}
class eH extends g { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(fM){ return df();} NGetEnterAnim(fM){ return df();} NGetChangeAnim(fM){ return df();} NSync(fM){ if(this.dirty){(this.push(fM))(this.value);this.dirty=false;} } constructor(fM, fN){ super();this.push=fN;this.value=void 0;this.dirty=false;this.updates=cH((fO) => { this.value=fO;this.dirty=true;}, fM);} }
class eI extends Error { static New(){ return new this("New");} static New_1(fM){ return new this("New_1", fM);} constructor(fM, fN){ if(fM=="New"){ fM="New_1";fN="The given key was not present in the dictionary.";} if(fM=="New_1"){ const fO=fN;super(fO);} } }
let eJ=fJ((fM) => class fN { static { eJ=fM(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(f4) =>[(f5) => { f5.addEventListener("change", () => f4.Get()!=f5.checked?f4.Set(f5.checked):null);}, (f5) =>(f6) => f6!=null&&f6.$==1?void(f5.checked=f6.$0):null, cH(D, f4.View)];this.StringSet=(f4) =>(f5) => { f4.value=f5;};this.StringGet=(f4) => D(f4.value);const fO=e1();const fP=e0();this.StringApply=(f4) => eZ(fO, fP, f4);this.StringListSet=(f4) =>(f5) => { const f6=f4.options;for(let f7=0, f8=f6.length-1;f7<=f8;f7++)((() => { const f9=f6.item(f7);f9.selected=c8(f9.value, f5);})());};this.StringListGet=(f4) => { const f5=f4.selectedOptions;return D(bo(u0036(() => u0037((f6) =>[f5.item(f6).value], f(0, f5.length-1)))));};const fQ=e3();const fR=e2();this.StringListApply=(f4) => eZ(fQ, fR, f4);this.DateTimeSetUnchecked=(f4) =>(f5) => { f4.value=(new Date(f5)).toLocaleString();};this.DateTimeGetUnchecked=(f4) => { let f5;let f6;const f7=f4.value;if(fl(f7))return D(-8640000000000000);else { f5=0;const f8=fu(f7);let f9=f8!=null&&f8.$==1&&(f5=f8.$0,true);f6=[f9, f5];return f6[0]?D(f6[1]):null;} };const fS=e5();const fT=e4();this.DateTimeApplyUnchecked=(f4) => eZ(fS, fT, f4);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(f4) => { const f5=f4.files;return D(bo(u0036(() => u0035((f6) => f5.item(f6), f(0, f5.length-1)))));};const fU=e8();const fV=e7();this.FileApplyUnchecked=(f4) => e6(fU, fV, f4);this.IntSetUnchecked=(f4) =>(f5) => { f4.value=String(f5);};this.IntGetUnchecked=(f4) => { const f5=f4.value;if(fl(f5))return D(0);else { const f6=+f5;return f6!==f6>>0?null:D(f6);} };const fW=e_();const fX=e9();this.IntApplyUnchecked=(f4) => eZ(fW, fX, f4);this.IntSetChecked=(f4) =>(f5) => { const f6=f5.Input;return f4.value!=f6?void(f4.value=f6):null;};this.IntGetChecked=(f4) => { let f5;let f6;const f7=f4.value;if(fl(f7))f5=(f4.checkValidity?f4.checkValidity():true)?fm.Blank(f7):fm.Invalid(f7);else { const f8=(f6=0,[bI(f7, {get:() => f6, set:(f9) => { f6=f9;}}), f6]);f5=f8[0]?fm.Valid(f8[1], f7):fm.Invalid(f7);} return D(f5);};const fY=fa();const fZ=e$();this.IntApplyChecked=(f4) => eZ(fY, fZ, f4);this.FloatSetUnchecked=(f4) =>(f5) => { f4.value=String(f5);};this.FloatGetUnchecked=(f4) => { const f5=f4.value;if(fl(f5))return D(0);else { const f6=+f5;return isNaN(f6)?null:D(f6);} };const f0=fc();const f1=fb();this.FloatApplyUnchecked=(f4) => eZ(f0, f1, f4);this.FloatSetChecked=(f4) =>(f5) => { const f6=f5.Input;return f4.value!=f6?void(f4.value=f6):null;};this.FloatGetChecked=(f4) => { let f5;const f6=f4.value;if(fl(f6))f5=(f4.checkValidity?f4.checkValidity():true)?fm.Blank(f6):fm.Invalid(f6);else { const f7=+f6;f5=isNaN(f7)?fm.Invalid(f6):fm.Valid(f7, f6);} return D(f5);};const f2=fe();const f3=fd();this.FloatApplyChecked=(f4) => eZ(f2, f3, f4);} });
class eK extends g { idle;robin;Fork(fM){ this.robin.push(fM);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const fM=Date.now();let fN=true;while(fN)if(this.robin.length===0){ this.idle=true;fN=false;} else {(this.robin.shift())();Date.now()-fM>40?(setTimeout(() => { this.tick();}, 0),fN=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class eL extends g { transformTime;static Custom(fM){ return new eL(fM);} constructor(fM){ super();this.transformTime=fM;} }
function eM(fM, fN){ return{k:fM, ct:fN};}
function eN(fM){ return{$:1, $0:fM};}
function eO(fM){ return{$:0, $0:fM};}
function eP(fM){ return{$:2, $0:fM};}
let eQ=fJ((fM) => class fN { static { eQ=fM(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=eR(false, []);this.scheduler=new eK();this.defCTS=[new fn()];this.Zero=ej();this.GetCT=(fO) => { fO.k(eO(fO.ct));};} });
function eR(fM, fN){ return{c:fM, r:fN};}
function eS(fM, fN){ return new u0030("New_2", bn(fM, eU(fN)));}
function eT(fM, fN){ const fO=new u0030("New_2", eU(fN));fO.ExceptWith(eU(fM));return fO;}
function eU(fM){ const fN=bs(fM.Count, void 0);fM.CopyTo(fN, 0);return fN;}
function eV(fM, fN){ const fO=new u0030("New_2", eU(fM));fO.IntersectWith(eU(fN));return fO;}
function eW(fM){ return fM.$==1?fM.$0:eY();}
function eX(fM){ return fM.$==1?fM.$1:eY();}
function eY(){ return d("The input list was empty.");}
function eZ(fM, fN, fO){ let fP;fP=null;return[(fQ) => { const fR=() => { fO.UpdateMaybe((fS) => { let fT;fP=fM(fQ);return fP!=null&&fP.$==1&&(!n(fP.$0, fS)&&(fT=[fP, fP.$0],true))?fT[0]:null;});};fQ.addEventListener("change", fR);fQ.addEventListener("input", fR);fQ.addEventListener("keypress", fR);}, (fQ) => { const fR=fN(fQ);return(fS) => fS==null?null:fR(fS.$0);}, cH((fQ) => { let fR;return fP!=null&&fP.$==1&&(n(fP.$0, fQ)&&(fR=fP.$0,true))?null:D(fQ);}, fO.View)];}
function e0(){ return eJ.StringSet;}
function e1(){ return eJ.StringGet;}
function e2(){ return eJ.StringListSet;}
function e3(){ return eJ.StringListGet;}
function e4(){ return eJ.DateTimeSetUnchecked;}
function e5(){ return eJ.DateTimeGetUnchecked;}
function e6(fM, fN, fO){ let fP;fP=null;return[(fQ) => { fQ.addEventListener("change", () => { fO.UpdateMaybe((fR) => { let fS;fP=fM(fQ);return fP!=null&&fP.$==1&&(fP.$0!==fR&&(fS=[fP, fP.$0],true))?fS[0]:null;});});}, (fQ) => { const fR=fN(fQ);return(fS) => fS==null?null:fR(fS.$0);}, cH((fQ) => { let fR;return fP!=null&&fP.$==1&&(n(fP.$0, fQ)&&(fR=fP.$0,true))?null:D(fQ);}, fO.View)];}
function e7(){ return eJ.FileSetUnchecked;}
function e8(){ return eJ.FileGetUnchecked;}
function e9(){ return eJ.IntSetUnchecked;}
function e_(){ return eJ.IntGetUnchecked;}
function e$(){ return eJ.IntSetChecked;}
function fa(){ return eJ.IntGetChecked;}
function fb(){ return eJ.FloatSetUnchecked;}
function fc(){ return eJ.FloatGetUnchecked;}
function fd(){ return eJ.FloatSetChecked;}
function fe(){ return eJ.FloatGetChecked;}
function ff(){ return eJ.StringApply;}
function fg(){ return eJ.FloatApplyUnchecked;}
function fh(){ return eJ.BoolCheckedApply;}
function fi(){ return eJ.DateTimeApplyUnchecked;}
function fj(){ return eJ.FileApplyUnchecked;}
function fk(){ return eJ.StringListApply;}
function fl(fM){ return d2(ft, fM);}
class fm { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(fM){ return fK(fm, {$:2, $0:fM});} static Invalid(fM){ return fK(fm, {$:1, $0:fM});} static Valid(fM, fN){ return fK(fm, {$:0, $0:fM, $1:fN});} }
class fn extends g { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function fo(fM, fN){ let fO;if(fN!=null&&fN.$==1){ const fP=[];fO=fN.$0[0].nextSibling;while(fO!==fN.$0[1]){ fP.push(fO);fO=fO.nextSibling;} return fs(fP);} else { let fQ=fM.childNodes.length;const fR=fM.childNodes;let fS=bt(fQ, (fT) => fR[fT]);return fs(fS);} }
function fp(fM, fN){ const fO=fM.$0;return fs(bn((fP) => br((fQ) =>!(fP===fQ), fO), fN.$0));}
function fq(fM, fN){ bk(fM, fN.$0);}
function fr(fM){ const fN=[];function fO(fP){ while(true){ if(fP!=null&&fP.$==2){ const fQ=fP.$0;fP=fQ.Current;} else if(fP!=null&&fP.$==1)return fN.push(fP.$0.El);else if(fP==null)return null;else if(fP!=null&&fP.$==5)return fN.push(fP.$0);else if(fP!=null&&fP.$==4)return fN.push(fP.$0.Text);else if(fP!=null&&fP.$==6){ const fR=fP.$0.Els;return(((fU) =>(fV) => { bk(fU, fV);})((fU) => { if(fU==null||fU.constructor===Object)fO(fU);else fN.push(fU);}))(fR);} else { const fS=fP.$1;const fT=fP.$0;fO(fT);fP=fS;} } } fO(fM.Children);return fs(d6(fN));}
function fs(fM){ return{$:0, $0:fM};}
function ft(fM){ return fM.match(new RegExp("\\s"))!==null;}
function fu(fM){ const fN=Date.parse(fM);return isNaN(fN)?null:D(fN);}
function fv(fM, fN, fO, fP){ const fQ=+fM;const fR=fQ===fQ-fQ%1&&fQ>=fN&&fQ<=fO;if(fR)fP.set(fQ);return fR;}
class fw extends Error { ct;static New(fM){ return new this("New", fM);} static New_1(fM, fN, fO){ return new this("New_1", fM, fN, fO);} constructor(fM, fN, fO, fP){ let fQ;if(fM=="New"){ fQ=fN;fM="New_1";fN="The operation was canceled.";fO=null;fP=fQ;} if(fM=="New_1"){ const fR=fN;const fS=fO;const fT=fP;super(fR);this.inner=fS;this.ct=fT;} } }
function fx(fM){ return fC(false, fM, fy);}
function fy(){ const fM=this.v();this.c=true;this.v=fM;this.f=fz;return fM;}
function fz(){ return this.v;}
let fA=fJ((fM) => class fN { static { fA=fM(this);} static Empty;static { this.Empty={$:0};} });
function fB(fM){ fM.splice(0, l(fM));}
function fC(fM, fN, fO){ return{c:fM, v:fN, f:fO};}
fL(() => { b();});
fD();

